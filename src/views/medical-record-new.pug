extends home

block content
  .medical-record-new
    form(action="/guardar", method="post" id="formMedicalRecordNew")
      // Datos del profesional
      h2 Datos del Profesional
      .container-profesional
        .column
          label(for="profesional_nombre") Nombre: #{person.firstName} #{person.lastName}
        .column
          label(for="profesional_matricula") Matrícula: #{profesional.registrationNumber}
                     
      // Datos del paciente
      h2 Datos del Paciente
      .container-paciente
        .column
            label(for="paciente_documento") Documento:
            .search-dni  
                input(type="hidden", id="patientsData", value= patients?JSON.stringify(patients):'')                    
                //input(name="prestaciones-dni" id="prestaciones-dni" list="patientList" placeholder="Buscar pacientes..." required)
                select(id="patientList")
                  option(value="") Seleccione un paciente
                               
            .overlay
            .popup
                h2 Paciente
                p#patientInfo
                button#acceptButtonPopup(type="button") Agregar
                button(type="button",id="cancelButtonPopup" ,onclick="closePopup()") Cancelar
            label(for="paciente_nombre") Nombre:
            input(type="text", name="paciente_nombre", id="paciente_nombre", required, disabled)
            label(for="paciente_apellido") Apellido:
            input(type="text", name="paciente_apellido", id="paciente_apellido", required, disabled)
            label(for="paciente_fecha_nacimiento") Fecha de Nacimiento:
            input(type="date", name="paciente_fecha_nacimiento", id="paciente_fecha_nacimiento", required, disabled)
        .column
            label(for="paciente_sexo") Sexo:
            select(name="paciente_sexo", id="paciente_sexo", required, disabled)
                option(value="") Seleccione Sexo
                option(value="MALE") MASCULINO
                option(value="FEMALE") FEMENINO
                option(value="OTHER") OTRO
            label(for="paciente_obra_social") Obra Social:
            input(type="text", name="paciente_obra_social", id="paciente_obra_social", required, disabled)
            label(for="paciente_plan") Plan:
            input(type="text", name="paciente_plan", id="paciente_plan", required, disabled)

      // Prestaciones
      h2 Prestaciones
      input(type="hidden" name="sectionId" id="sectionId" value='')
      .container-prestaciones
                label(for="prestaciones") Prestaciones:
                .search-dni
                    input(type="text", name="prestaciones", id="prestaciones")
                    button(id="button-addPrestacion" type="button")
                      i.fa.fa-plus  Añadir Prestación
                    button(id="button-searchPrestaci" type="submit")
                      i.fa.fa-search  Buscar Prestación

      // Detalles de la prescripción
      h2 Detalles de la Prescripción
                               
      .container-prescripcion
        label(for="enfermedad") Diagnóstico Comun:
            .search-sckiness  
                input(type="hidden", id="sickness", value= sickness?JSON.stringify(sickness):'')
                select(id="sicknessList" onchange="updateFields()")
                  option(value="") Seleccione un diagnostico
                  each sk in sickness
                      option(value=sk.id)= sk.code + '-' + sk.name

        label(for="enfermedad-nombre") Nombre:
        input(type="text", name="enfermedad-nombre", id="enfermedad-nombre", rows="4", required)
        label(for="enfermedad-code") Codigo:
        input(type="text", name="enfermedad-code", id="enfermedad-code", rows="4", required)
        label(for="diagnostico") Diagnóstico:
        textarea(name="diagnostico", id="diagnostico", rows="4", required)
        label(for="fecha_prescripcion") Fecha de la Prescripción:
        input(type="date", name="fecha_prescripcion", id="fecha_prescripcion", required)
        label(for="vigencia") Vigencia:
        input(type="text", name="vigencia", id="vigencia")
        button(type="button", onclick="clearFields()") Limpiar

      // Medicamentos
      h2 Medicamentos
      .container-medicamentos
        label(for="medicamentos") Medicamentos:        
        .search-dni                
                input(type="text" name="medicamentos", id="medicamentos", required)
                button(type="submit")
                    i.fa.fa-search  Buscar
      
      button(type="submit") Guardar

  .overlay#overlayPrestacion
      .popupPres#popupPrestacion
                h2 Nueva Prestación
                form(id="form-benefit-popup" action="/api/benefit/create" method="post")
                    label(for="name") Nombre:
                    input(type="text" name="name" id="name" required=true )

                    label(for="code") Código:
                    input(type="text" name="code" id="code" required=true )

                    label(for="sectionId") Sección:
                    select(name="sectionId" id="sectionId" required=true)
                            option(value="") Seleccione una Sección
                            each section in sections
                                option(value=section.id )= section.name

                    label(for="description") Descripción:
                    textarea(name="description" id="description" rows="3" cols="225")= ''

                  
                    label(for="justification") Justificación:
                    textarea(name="justification" id="justification" rows="3" cols="225")=  ''

                    label(for="state") Estado:
                    select(name="state" id="state")
                            option(value=1 ) Activo
                            option(value=0 ) Inactivo        

                    button(type="submit") Crear
                    button(type="button" onclick="closePopup()") Cancelar  